# Description: A version control system (CVS replacement)
# URL: http://subversion.apache.org
# Maintainer: Jose V Beneyto, sepen at crux dot nu
# Packager: Simone Rota, sip at crux dot nu
# Depends on: apr neon expat sqlite3

name=subversion
version=1.9.5
release=1
source=(http://www.apache.org/dist/$name/$name-$version.tar.bz2 \
	subversion.rpath.fix.patch \
	ruby-frozen-nil.patch)

build() {
    cd $name-$version

    patch -p1 -i $SRC/ruby-frozen-nil.patch
    patch -p0 -i $SRC/subversion.rpath.fix.patch

    ./configure --prefix=/usr \
       --mandir=/usr/man \
       --with-apr=/usr --with-apr-util=/usr --with-neon=/usr \
       --disable-mod-activation --without-swig --disable-nls \
       --disable-neon-version-check \
       --without-apxs

    make
    make -j1 DESTDIR=$PKG install

    # info pages seem to get generated when makeinfo is available
    rm -rf $PKG/usr/info
}
