#!/bin/sh

. $TS_GLOBAL
IFS=$'\n'

case "$1" in
init)
	if ! pkg_initialized $PACKAGE; then
		alsactl init
		for control in Master PCM CD Video; do
			amixer sset $control $AUDIO_LEVEL%
		done
		if [ -z "$MIC_DEVICE" ]; then
			MIC_DEVICE=Mic
		fi
		if [ "$MIC_LEVEL" -gt "0" ]; then
			amixer sset Capture $MIC_LEVEL% unmute > /dev/null
			amixer sset $MIC_DEVICE playback mute > /dev/null
			amixer sset $MIC_DEVICE $MIC_LEVEL% cap > /dev/null
		fi
		pkg_set_init_flag $PACKAGE
	fi
	;;
*)
	echo "Usage: $0 init"
	;;
esac
